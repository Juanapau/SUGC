<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta - Sistema UGC</title>
<link rel="icon" type="image/png" href="./logo.png">
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
min-height: 100vh;
padding: 20px;
}

.container {
max-width: 1400px;
margin: 0 auto;
}

header {
background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
color: white;
padding: 20px 30px;
border-radius: 15px;
margin-bottom: 30px;
box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

.header-top {
display: flex;
justify-content: space-between;
align-items: center;
gap: 20px;
flex-wrap: wrap;
}

.header-left {
display: flex;
align-items: center;
gap: 15px;
}

.header-left img {
width: 50px;
height: 50px;
}

.header-title h1 {
font-size: 1.5em;
margin-bottom: 3px;
}

.header-title p {
color: #4a9eff;
font-size: 0.85em;
}

.header-right {
display: flex;
align-items: center;
gap: 15px;
}

.user-bar {
background: white;
padding: 12px 20px;
border-radius: 10px;
margin-top: 15px;
display: flex;
justify-content: space-between;
align-items: center;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.user-info-bar {
display: flex;
align-items: center;
gap: 12px;
}

.user-avatar-bar {
width: 40px;
height: 40px;
background: #2a5298;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.2em;
}

.user-details-bar h3 {
color: #000000;
font-size: 0.95em;
margin-bottom: 2px;
}

.user-details-bar p {
color: #2a5298;
font-size: 0.75em;
font-weight: 600;
}

.btn-logout {
background: linear-gradient(135deg, #000000 0%, #333333 100%);
color: white;
border: none;
padding: 8px 20px;
border-radius: 8px;
cursor: pointer;
font-size: 0.9em;
font-weight: 600;
transition: all 0.3s;
}

.btn-logout:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.modules-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 25px;
}

.module-card {
background: white;
border-radius: 15px;
padding: 30px;
box-shadow: 0 8px 32px rgba(0,0,0,0.2);
cursor: pointer;
transition: all 0.3s ease;
border-top: 5px solid #2a5298;
}

.module-card:hover {
transform: translateY(-10px);
box-shadow: 0 12px 48px rgba(0,0,0,0.3);
border-top-color: #000000;
}

.module-header {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 20px;
}

.module-icon {
font-size: 3em;
color: #2a5298;
}

.module-info h3 {
color: #000000;
font-size: 1.5em;
margin-bottom: 5px;
}

.module-info p {
color: #666;
font-size: 0.9em;
}

.module-stats {
display: flex;
gap: 20px;
margin-top: 15px;
padding-top: 15px;
border-top: 2px solid #f0f0f0;
}

.stat-item {
flex: 1;
text-align: center;
}

.stat-item .number {
font-size: 2em;
font-weight: bold;
color: #2a5298;
display: block;
}

.stat-item .label {
font-size: 0.75em;
color: #666;
text-transform: uppercase;
margin-top: 5px;
}

.btn-view {
width: 100%;
padding: 12px 30px;
background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
color: white;
border: none;
border-radius: 8px;
font-size: 1em;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
margin-top: 15px;
}

.btn-view:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(42,82,152,0.4);
}

/* MODAL DE CONFIRMACIÃ“N */
.modal-confirm {
display: none;
position: fixed;
z-index: 9999;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0,0,0,0.7);
align-items: center;
justify-content: center;
}

.modal-confirm-content {
background: white;
border-radius: 15px;
max-width: 450px;
width: 90%;
box-shadow: 0 12px 48px rgba(0,0,0,0.4);
animation: slideIn 0.3s ease;
overflow: hidden;
}

@keyframes slideIn {
from {
transform: translateY(-50px);
opacity: 0;
}
to {
transform: translateY(0);
opacity: 1;
}
}

.modal-confirm-header {
background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
color: white;
padding: 20px 25px;
text-align: center;
}

.modal-confirm-header h3 {
font-size: 1.3em;
}

.modal-confirm-body {
padding: 30px 25px;
text-align: center;
}

.modal-confirm-body p {
color: #666;
font-size: 1.05em;
line-height: 1.6;
}

.modal-confirm-buttons {
display: flex;
gap: 15px;
margin-top: 25px;
}

.btn-confirm {
flex: 1;
padding: 12px 30px;
border: none;
border-radius: 8px;
font-size: 1em;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}

.btn-confirm-yes {
background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
color: white;
}

.btn-confirm-yes:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(42,82,152,0.4);
}

.btn-confirm-no {
background: linear-gradient(135deg, #000000 0%, #333333 100%);
color: white;
}

.btn-confirm-no:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

@media (max-width: 768px) {
.header-top {
flex-direction: column;
}

.modules-grid {
grid-template-columns: 1fr;
}
}
</style>
</head>
<body>

<div class="container">
<!-- HEADER -->
<header>
<div class="header-top">
<div class="header-left">
<img src="./logo.png" alt="Logo" onerror="this.style.display='none'">
<div class="header-title">
<h1>ğŸ“Š Sistema de Consulta</h1>
<p>Solo Lectura - CENSA</p>
</div>
</div>
</div>

<!-- BARRA DE USUARIO -->
<div class="user-bar">
<div class="user-info-bar">
<div class="user-avatar-bar">ğŸ‘¤</div>
<div class="user-details-bar">
<h3 id="userName">Usuario de Consulta</h3>
<p id="userCargo">ğŸ” Acceso de solo lectura</p>
</div>
</div>
<button class="btn-logout" onclick="mostrarConfirmacionSalir()">
ğŸšª Salir
</button>
</div>
</header>

<!-- MÃ“DULOS -->
<div class="modules-grid">
<!-- INCIDENCIAS -->
<div class="module-card" onclick="verModulo('incidencias')">
<div class="module-header">
<div class="module-icon">ğŸ“‹</div>
<div class="module-info">
<h3>Incidencias</h3>
<p>Registro de conductas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statIncidencias">---</span>
<span class="label">Registros</span>
</div>
<div class="stat-item">
<span class="number" id="statIncidenciasMes">---</span>
<span class="label">Este mes</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- TARDANZAS -->
<div class="module-card" onclick="verModulo('tardanzas')">
<div class="module-header">
<div class="module-icon">â°</div>
<div class="module-info">
<h3>Tardanzas</h3>
<p>Control de llegadas tarde</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statTardanzas">---</span>
<span class="label">Total</span>
</div>
<div class="stat-item">
<span class="number" id="statTardanzasHoy">---</span>
<span class="label">Hoy</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- ESTADÃSTICAS -->
<div class="module-card" onclick="verModulo('estadisticas')">
<div class="module-header">
<div class="module-icon">ğŸ“Š</div>
<div class="module-info">
<h3>EstadÃ­sticas</h3>
<p>Reportes y grÃ¡ficas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ“ˆ</span>
<span class="label">AnÃ¡lisis</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“‰</span>
<span class="label">Tendencias</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Reportes</button>
</div>

<!-- HISTORIAL -->
<div class="module-card" onclick="verModulo('historial')">
<div class="module-header">
<div class="module-icon">ğŸ“œ</div>
<div class="module-info">
<h3>Historial</h3>
<p>Actividad del sistema</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ•</span>
<span class="label">Reciente</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“…</span>
<span class="label">Archivo</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Historial</button>
</div>
</div>
</div>

<!-- MODAL DE CONFIRMACIÃ“N -->
<div class="modal-confirm" id="modalConfirm">
<div class="modal-confirm-content">
<div class="modal-confirm-header">
<h3>âš ï¸ Confirmar Cierre de SesiÃ³n</h3>
</div>
<div class="modal-confirm-body">
<p>Â¿EstÃ¡s seguro de que deseas cerrar sesiÃ³n?</p>
<div class="modal-confirm-buttons">
<button class="btn-confirm btn-confirm-yes" onclick="cerrarSesion()">
SÃ­, Cerrar SesiÃ³n
</button>
<button class="btn-confirm btn-confirm-no" onclick="cerrarModal()">
Cancelar
</button>
</div>
</div>
</div>
</div>

<script>
// ==========================================
// VERIFICAR AUTENTICACIÃ“N
// ==========================================

window.addEventListener('load', function() {
const usuarioData = localStorage.getItem('usuarioUGC');

if (!usuarioData) {
window.location.href = 'index.html';
return;
}

const usuario = JSON.parse(usuarioData);

if (usuario.rol !== 'consulta') {
if (usuario.rol === 'administrador') {
console.log('â„¹ï¸ Administrador en vista de consulta');
} else {
window.location.href = 'index.html';
return;
}
}

document.getElementById('userName').textContent = usuario.nombre;
if (usuario.cargo) {
document.getElementById('userCargo').textContent = 'ğŸ’¼ ' + usuario.cargo;
}

console.log('âœ… Usuario autenticado:', usuario);

cargarEstadisticas();
});

// ==========================================
// CARGAR ESTADÃSTICAS
// ==========================================

function cargarEstadisticas() {
document.getElementById('statIncidencias').textContent = '124';
document.getElementById('statIncidenciasMes').textContent = '18';

document.getElementById('statTardanzas').textContent = '56';
document.getElementById('statTardanzasHoy').textContent = '3';

console.log('ğŸ“Š EstadÃ­sticas cargadas');
}

// ==========================================
// VER MÃ“DULO
// ==========================================

function verModulo(modulo) {
console.log('ğŸ‘ï¸ Abriendo mÃ³dulo:', modulo);

const paginas = {
'incidencias': 'incidencias-consulta.html',
'tardanzas': 'tardanzas-consulta.html',
'estadisticas': 'estadisticas-consulta.html',
'historial': 'historial-consulta.html'
};

if (paginas[modulo]) {
window.location.href = paginas[modulo];
} else {
alert(`ğŸ“Š MÃ³dulo de ${modulo}\n\nğŸ”’ Vista de solo lectura activada.`);
}
}

// ==========================================
// MODAL DE CONFIRMACIÃ“N
// ==========================================

function mostrarConfirmacionSalir() {
document.getElementById('modalConfirm').style.display = 'flex';
}

function cerrarModal() {
document.getElementById('modalConfirm').style.display = 'none';
}

// ==========================================
// CERRAR SESIÃ“N
// ==========================================

function cerrarSesion() {
localStorage.removeItem('usuarioUGC');
console.log('ğŸ‘‹ SesiÃ³n cerrada');
window.location.href = 'index.html';
}

// Cerrar modal al hacer clic fuera
window.onclick = function(event) {
const modal = document.getElementById('modalConfirm');
if (event.target == modal) {
cerrarModal();
}
}

console.log('ğŸ“Š Sistema de consulta cargado');
</script>

</body>
</html>
