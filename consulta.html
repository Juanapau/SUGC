<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta - Sistema UGC</title>
<link rel="icon" type="image/png" href="./logo.png">
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
min-height: 100vh;
padding: 20px;
}

.container {
max-width: 1400px;
margin: 0 auto;
}

header {
background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
color: white;
padding: 25px 30px;
border-radius: 15px;
margin-bottom: 30px;
box-shadow: 0 8px 32px rgba(0,0,0,0.3);
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
gap: 15px;
}

.header-left {
display: flex;
align-items: center;
gap: 15px;
}

.header-left img {
width: 50px;
height: 50px;
border-radius: 50%;
border: 3px solid #2a5298;
}

.header-title h1 {
font-size: 1.8em;
margin-bottom: 5px;
}

.header-title p {
color: #4a9eff;
font-size: 0.9em;
}

.user-info {
background: rgba(42, 82, 152, 0.2);
padding: 10px 20px;
border-radius: 10px;
display: flex;
align-items: center;
gap: 15px;
border: 1px solid rgba(42, 82, 152, 0.4);
}

.user-avatar {
width: 40px;
height: 40px;
background: #2a5298;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.3em;
}

.user-details h3 {
font-size: 0.95em;
margin-bottom: 2px;
}

.user-details p {
font-size: 0.75em;
color: #4a9eff;
}

.btn-logout {
background: linear-gradient(135deg, #000000 0%, #333333 100%);
color: white;
border: none;
padding: 8px 20px;
border-radius: 8px;
cursor: pointer;
font-size: 0.9em;
font-weight: 600;
transition: all 0.3s;
}

.btn-logout:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.alert-consulta {
background: white;
border-radius: 15px;
padding: 20px 25px;
margin-bottom: 30px;
display: flex;
align-items: center;
gap: 15px;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
border-left: 5px solid #fbbf24;
}

.alert-consulta .icon {
font-size: 2.5em;
}

.alert-consulta .content h3 {
color: #000000;
font-size: 1.1em;
margin-bottom: 5px;
}

.alert-consulta .content p {
color: #666;
font-size: 0.9em;
line-height: 1.6;
}

.modules-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 25px;
}

.module-card {
background: white;
border-radius: 15px;
padding: 30px;
box-shadow: 0 8px 32px rgba(0,0,0,0.2);
cursor: pointer;
transition: all 0.3s ease;
border-top: 5px solid #2a5298;
}

.module-card:hover {
transform: translateY(-10px);
box-shadow: 0 12px 48px rgba(0,0,0,0.3);
border-top-color: #000000;
}

.module-header {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 20px;
}

.module-icon {
font-size: 3em;
color: #2a5298;
}

.module-info h3 {
color: #000000;
font-size: 1.5em;
margin-bottom: 5px;
}

.module-info p {
color: #666;
font-size: 0.9em;
}

.module-stats {
display: flex;
gap: 20px;
margin-top: 15px;
padding-top: 15px;
border-top: 2px solid #f0f0f0;
}

.stat-item {
flex: 1;
text-align: center;
}

.stat-item .number {
font-size: 2em;
font-weight: bold;
color: #2a5298;
display: block;
}

.stat-item .label {
font-size: 0.75em;
color: #666;
text-transform: uppercase;
margin-top: 5px;
}

.btn-view {
width: 100%;
padding: 12px 30px;
background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
color: white;
border: none;
border-radius: 8px;
font-size: 1em;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
margin-top: 15px;
}

.btn-view:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(42,82,152,0.4);
}

@media (max-width: 768px) {
header {
flex-direction: column;
text-align: center;
}

.header-left {
flex-direction: column;
}

.modules-grid {
grid-template-columns: 1fr;
}
}
</style>
</head>
<body>

<div class="container">
<!-- HEADER -->
<header>
<div class="header-left">
<img src="./logo.png" alt="Logo" onerror="this.style.display='none'">
<div class="header-title">
<h1>ğŸ“Š Sistema de Consulta</h1>
<p>Solo Lectura - CENSA</p>
</div>
</div>

<div class="user-info">
<div class="user-avatar">ğŸ‘¤</div>
<div class="user-details">
<h3 id="userName">Usuario de Consulta</h3>
<p id="userCargo">ğŸ” Acceso de solo lectura</p>
</div>
<button class="btn-logout" onclick="cerrarSesion()">
ğŸšª Salir
</button>
</div>
</header>

<!-- ALERTA DE CONSULTA -->
<div class="alert-consulta">
<div class="icon">ğŸ”’</div>
<div class="content">
<h3>Modo Solo Consulta Activado</h3>
<p>Tienes acceso de <strong>solo lectura</strong> a: Incidencias, Tardanzas, EstadÃ­sticas e Historial. No podrÃ¡s crear, editar ni eliminar registros. Para solicitar permisos de administrador, contacta a la Unidad de GestiÃ³n de Convivencia.</p>
</div>
</div>

<!-- MÃ“DULOS -->
<div class="modules-grid">
<!-- INCIDENCIAS -->
<div class="module-card" onclick="verModulo('incidencias')">
<div class="module-header">
<div class="module-icon">ğŸ“‹</div>
<div class="module-info">
<h3>Incidencias</h3>
<p>Registro de conductas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statIncidencias">---</span>
<span class="label">Registros</span>
</div>
<div class="stat-item">
<span class="number" id="statIncidenciasMes">---</span>
<span class="label">Este mes</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- TARDANZAS -->
<div class="module-card" onclick="verModulo('tardanzas')">
<div class="module-header">
<div class="module-icon">â°</div>
<div class="module-info">
<h3>Tardanzas</h3>
<p>Control de llegadas tarde</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number" id="statTardanzas">---</span>
<span class="label">Total</span>
</div>
<div class="stat-item">
<span class="number" id="statTardanzasHoy">---</span>
<span class="label">Hoy</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Registros</button>
</div>

<!-- ESTADÃSTICAS -->
<div class="module-card" onclick="verModulo('estadisticas')">
<div class="module-header">
<div class="module-icon">ğŸ“Š</div>
<div class="module-info">
<h3>EstadÃ­sticas</h3>
<p>Reportes y grÃ¡ficas</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ“ˆ</span>
<span class="label">AnÃ¡lisis</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“‰</span>
<span class="label">Tendencias</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Reportes</button>
</div>

<!-- HISTORIAL -->
<div class="module-card" onclick="verModulo('historial')">
<div class="module-header">
<div class="module-icon">ğŸ“œ</div>
<div class="module-info">
<h3>Historial</h3>
<p>Actividad del sistema</p>
</div>
</div>
<div class="module-stats">
<div class="stat-item">
<span class="number">ğŸ•</span>
<span class="label">Reciente</span>
</div>
<div class="stat-item">
<span class="number">ğŸ“…</span>
<span class="label">Archivo</span>
</div>
</div>
<button class="btn-view">ğŸ‘ï¸ Ver Historial</button>
</div>
</div>
</div>

<script>
// ==========================================
// VERIFICAR AUTENTICACIÃ“N
// ==========================================

window.addEventListener('load', function() {
const usuarioData = localStorage.getItem('usuarioUGC');

if (!usuarioData) {
window.location.href = 'index.html';
return;
}

const usuario = JSON.parse(usuarioData);

if (usuario.rol !== 'consulta') {
if (usuario.rol === 'administrador') {
console.log('â„¹ï¸ Administrador en vista de consulta');
} else {
window.location.href = 'index.html';
return;
}
}

document.getElementById('userName').textContent = usuario.nombre;
if (usuario.cargo) {
document.getElementById('userCargo').textContent = 'ğŸ’¼ ' + usuario.cargo;
}

console.log('âœ… Usuario autenticado:', usuario);

cargarEstadisticas();
});

// ==========================================
// CARGAR ESTADÃSTICAS
// ==========================================

function cargarEstadisticas() {
document.getElementById('statIncidencias').textContent = '124';
document.getElementById('statIncidenciasMes').textContent = '18';

document.getElementById('statTardanzas').textContent = '56';
document.getElementById('statTardanzasHoy').textContent = '3';

console.log('ğŸ“Š EstadÃ­sticas cargadas');
}

// ==========================================
// VER MÃ“DULO
// ==========================================

function verModulo(modulo) {
console.log('ğŸ‘ï¸ Abriendo mÃ³dulo:', modulo);

alert(`ğŸ“Š MÃ³dulo de ${modulo}\n\nğŸ”’ Vista de solo lectura activada.\n\nEn este mÃ³dulo podrÃ¡s VER todos los registros pero NO podrÃ¡s crear, editar ni eliminar.`);

// TODO: Redirigir a pÃ¡gina especÃ­fica del mÃ³dulo
// window.location.href = `${modulo}-consulta.html`;
}

// ==========================================
// CERRAR SESIÃ“N
// ==========================================

function cerrarSesion() {
const confirmar = confirm('Â¿EstÃ¡s seguro de que deseas cerrar sesiÃ³n?');

if (confirmar) {
localStorage.removeItem('usuarioUGC');
console.log('ğŸ‘‹ SesiÃ³n cerrada');
window.location.href = 'index.html';
}
}

console.log('ğŸ“Š Sistema de consulta cargado');
console.log('ğŸ“‹ MÃ³dulos disponibles: Incidencias, Tardanzas, EstadÃ­sticas, Historial');
</script>

</body>
</html>
